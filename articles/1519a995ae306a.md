---
title: "ã€TypeScriptã€‘Genericsã®åŸºç¤"
emoji: "ğŸ˜½"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [typescript, åˆå¿ƒè€…]
published: true
---

## ã¯ã˜ã‚ã«

TypeScript ã‚’å­¦ã³å§‹ã‚ãŸæ™‚ã®åŸºæœ¬çš„ãªã¨ã“ã‚ã®å‚™å¿˜éŒ²ã¨ãªã‚Šã¾ã™ã€‚

## Generics ã¨ã¯ï¼Ÿ

å‹ã®æ±ºå®šã‚’é…å»¶ã§ãã‚‹ã‚‚ã®ã€‚
åŸºæœ¬çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚

```ts
type Foo<T> = {
	value: T;
};

const foo: Foo<number> = {
	value: 0,
};
```

### Generics ã§ä½¿ç”¨ã•ã‚Œã‚‹ T ã‚„ K ãªã©ã®ç”±æ¥

Generics ã§ä½¿ç”¨ã•ã‚Œã‚‹ T ã‚„ K ãªã©ã®ç”±æ¥ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

- Tï¼šType
- Kï¼šKey
- Uï¼šUnknown
- Eï¼šElement
  ä»¥ä¸Šã® 4 ã¤ãŒæ…£ä¾‹çš„ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹ã®ã§è¦šãˆã¦ãŠãã¨è‰¯ã„ã€‚

## Generics ã®è‰¯ã•

å¾Œã‹ã‚‰ä½¿ã„ã¾ã‚ã—ãŸã‚Šã™ã‚‹éš›ã«ã€å‹ã‚’è‡ªç”±ã«å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```ts
type Foo<T> = {
	value: T;
};

const foo1: Foo<number> = {
	value: 0,
};
const foo2: Foo<string> = {
	value: "",
};
const foo3: Foo<number[]> = {
	value: [1, 2, 3],
};
```

Generics ã˜ã‚ƒãªã‹ã£ãŸã‚‰ value ã‚’å®šç¾©ã—ç›´ã•ãªã‘ã‚Œã°ãªã‚‰ãªããªã‚‹ã€‚

## Generics ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

ä»¥ä¸‹ã®ä¾‹ã®ã‚ˆã†ã«å¾Œã‹ã‚‰ Japanese ã‚„ American ã®å‹ãŒæ±ºå®šã•ã›ãŸã„å ´åˆã«ä½¿ã‚ã‚Œã‚‹ã€‚

```ts
type User<T> = {
	name: string;
	state: T;
};

type Japanese = User<"æ±äº¬éƒ½" | "å¤§é˜ªåºœ">;
type American = User<"CA" | "NY">;

const user1: Japanese = {
	name: "é¦™å·",
	state: "æ±äº¬éƒ½",
};

const user2: American = {
	name: "taylor",
	state: "CA",
};
```

## Generics ã®åˆæœŸå€¤

<T = string>ã¨ã™ã‚‹ã“ã¨ã§ã€åˆæœŸå€¤ãŒ string ã¨ãªã‚‹ã€‚
ãã®ãŸã‚ã€foo1 ã§ Foo<string>ã¨ã—ãªãã¦ã‚‚ã€åˆæœŸå€¤ã¯ string ã ã¨æš—é»™çš„ã«åˆ†ã‹ã£ã¦ã„ã‚‹ã®ã§å•é¡Œãªã„ã€‚

```ts
type Foo<T = string> = {
	value: T;
};

const foo1: Foo = {
	value: "",
};
const foo2: Foo<number> = {
	value: 111,
};
```

## Generics ã® extends ã«ã‚ˆã‚‹å‹åˆ¶ç´„

Generics ã®å‹å¼•æ•°ã«åˆ¶ç´„ã‚’åŠ ãˆãŸã„æ™‚ã« extends ã«ã‚ˆã‚‹å‹åˆ¶ç´„ã‚’ç”¨ã„ã‚‹ã€‚
ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã ã¨ã€extends ã§ string ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ã€string ã«äº’æ›æ€§ãŒãªã„ number ã¯
ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚

```ts
type Foo<T extends string> = {
	value: T;
};

const foo1: Foo<string> = {
	value: "",
};
const foo2: Foo<"abc"> = {
	value: "abc",
};
const foo3: Foo<number> = {
	// å‹ 'number' ã¯åˆ¶ç´„ 'string' ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã€‚
	value: 123,
};
```

## Generics ã®åˆæœŸå€¤ã¨ extends ã«ã‚ˆã‚‹å‹åˆ¶ç´„ã®çµ„ã¿åˆã‚ã›

ã‚·ãƒ³ãƒ—ãƒ«ã« = string ã¨ç¹‹ã’ã¦è¨˜è¿°ã™ã‚Œã° OKã€‚

```ts
type Foo<T extends string = string> = {
	value: T;
};

const foo1: Foo = {
	value: "",
};
const foo2: Foo<"abc"> = {
	value: "abc",
};
```

## Generics ã®å‹å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¨˜è¿°ã™ã‚‹ã€‚

```ts
const foo = <T, K, U>(foo: T, bar: K, baz: U) => {
	return {};
};
```

ã¾ãŸã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹å¼•æ•°ãã‚Œãã‚Œã«åˆæœŸå€¤ã‚„ extends ã®åˆ¶ç´„ã‚’ä»˜ã‘åŠ ãˆã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã€‚

```tsx
const foo = <T extends string, K extends number, U = boolean>(
	foo: T,
	bar: K,
	baz: U
) => {
	return {};
};
```

## Loolup Types

ä»¥ä¸‹ã®ã‚ˆã†ã« T[K]ã®æ§‹æ–‡ã§è¨˜è¿°ã™ã‚‹ã€‚

```tsx
const foo = <T extends string, K extends number, U = boolean>(
	foo: T,
	bar: K,
	baz: U
) => {
	return {};
};

type Obj = {
	a: number;
	b: boolean;
};

type Foo = Obj["a"];
```

## Generics ã¨ Loolup Types ãŒåˆã‚ã•ã£ãŸãƒ‘ã‚¿ãƒ¼ãƒ³

ç¬¬ä¸€å¼•æ•°ã® T ã¯ç¬¬äºŒå¼•æ•°ã§ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
extends ã¨ keyof ã‚’ç”¨ã„ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ T ã® key ã‚’ K ã«åˆ¶ç´„ã—ã¦ã„ã‚‹ã€‚
ãã‚Œã«ã‚ˆã‚Šã€Loolup Types ã® obj[key]ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªããªã‚‹ã€‚

```tsx
const getProperty = <T, K extends keyof T>(obj: T, key: K) => {
	return obj[key];
};

const obj = {
	foo: 1,
	bar: 2,
	baz: 3,
};

const hoge = getProperty(obj, "bar");
// const hoge: number
```

ã¾ãŸã€setProperty ã¾ãŸã€ã®ä¾‹ã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚
ç¬¬ä¸‰å¼•æ•°ã« value: T[K]ã¨ã™ã‚‹ã“ã¨ã§ã€value ã¯ number å‹ã¨ãªã‚‹ã€‚

```tsx
const getProperty = <T, K extends keyof T>(obj: T, key: K) => {
	return obj[key];
};

const setProperty = <T, K extends keyof T>(obj: T, key: K, value: T[K]) => {
	obj[key] = value;
};

const obj = {
	foo: 1,
	bar: 2,
	baz: 3,
};

const hoge = getProperty(obj, "bar");

setProperty(obj, "bar", 100);
```

## JavaScript ã§ç”¨ã„ã‚‰ã‚Œã‚‹ Generics

### map é–¢æ•°

map é–¢æ•°ã®å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‹æ¨è«–ãŒä¸Šæ‰‹ãå‹•ã„ã¦ã„ã‚‹ã€‚
map è‡ªä½“ãŒ Generics ã«ãªã£ã¦ã„ã¦ã€æš—é»™çš„ãªå‹è§£æ±ºã§ã†ã¾ãæ¨è«–ã—ã¦ãã‚Œã¦ã„ã‚‹ã€‚

```tsx
const foo1 = [1, 2, 3].map((v) => v);
// const foo1: number[]

const foo2 = [1, 2, 3].map((v) => v.toString());
// const foo2: string[]
```
